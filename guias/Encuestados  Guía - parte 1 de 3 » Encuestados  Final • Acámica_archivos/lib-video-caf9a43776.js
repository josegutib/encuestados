var __assign=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();System.register("pleier/ng-helper/module",["angular"],function(e,t){"use strict";var r;t&&t.id;return{setters:[function(e){r=e}],execute:function(){e("default",r.module("pleier",["ng","pleierTpls"]))}}}),System.register("pleier/ng-helper/component",["pleier/ng-helper/module"],function(e,t){"use strict";var r;t&&t.id;return e("Component",function(e){return function(t){r.default.directive(e.selector,function(){var r=[e.selector];e.require&&(r=r.concat(e.require));var n=__assign({},e.scope);return{restrict:"E",templateUrl:e.templateUrl,template:e.template,scope:n,controllerAs:"ctrl",controller:t,bindToController:!0,link:e.link,transclude:e.transclude,require:r}})}}),{setters:[function(e){r=e}],execute:function(){}}}),System.register("pleier/ng-helper/compose-link",[],function(e,t){"use strict";t&&t.id;return e("composeLinkFn",function(e){return function(t,r,n,i,o){var a=this;e.forEach(function(e){return e.call(a,t,r,n,i,o)})}}),{setters:[],execute:function(){}}}),System.register("pleier/ng-helper/directive",["pleier/ng-helper/module"],function(e,t){"use strict";var r;t&&t.id;return e("Directive",function(e){return function(t){r.default.directive(e.selector,function(){var r=[e.selector];return e.require&&(r=r.concat(e.require)),{restrict:"A",controller:t,link:e.link,multiElement:e.multiElement,transclude:e.transclude,priority:e.priority,terminal:e.terminal,require:r,replace:e.replace,template:e.template}})}}),{setters:[function(e){r=e}],execute:function(){}}}),System.register("pleier/ng-helper/lifecycle",[],function(e,t){"use strict";t&&t.id;function r(e){var t=e.split(".");return function(e){return function e(t,r){return void 0===t||0===r.length?t:e(t[r[0]],r.slice(1))}(e,t)}}function n(e,t){return function(n,i,o,a){var u=a[0],s=e.map(function(e){return r(e)});"function"!=typeof u[t]&&(u.constructor&&u.constructor.name?console.warn("Warning: "+u.constructor.name+" doens't have a lifecycle method called "+t):console.warn("Warning: component doens't have a lifecycle method called "+t,u));var c=n.$watch(function(){for(var r=0;r<e.length;r++)if(!s[r](u)&&!s[r](n))return;c(),u[t]()})}}return e("mockNgOnInitLink",function(e){return n(e,"ngOnInit")}),e("mockNgAfterViewInit",function(e){return n(e,"ngAfterViewInit")}),e("mockNgAfterContentInit",function(e){return n(e,"ngAfterContentInit")}),e("mockNgOnInitFromAttr",function(e){return function(t,r,n,i){var o=t.$watch(n[e],function(e){void 0!==e&&(o(),i[0].ngOnInit())})}}),{setters:[],execute:function(){}}}),System.register("pleier/ng-helper/require",["pleier/ng-helper/compose-link","pleier/ng-helper/lifecycle"],function(e,t){"use strict";var r,n;t&&t.id;function i(e){return function(t,r,n,i){var o=i[0];i.splice(1).forEach(function(t,r){t&&(o[e[r]]=t)})}}return e("bindRequireToCtrl",i),e("bindToCtrlCallOnInit",function(e){return r.composeLinkFn([i(e),n.mockNgOnInitLink(e)])}),{setters:[function(e){r=e},function(e){n=e}],execute:function(){}}}),System.register("pleier/ng-helper/local-template-variable",[],function(e,t){"use strict";t&&t.id;function r(e,t,r){t[e]=r,"object"==typeof t.ctrl&&(t.ctrl[e]=r)}function n(e){return Object.keys(e).filter(function(e){return"#"===e[0]}).map(function(e){return e.slice(1)})}return e("localTemplateVariableLink",function(e,t,i,o){n(i).forEach(function(t){return r(t,e.$parent,o[0])})}),e("directiveLocalTemplateVariableLink",function(e,t,i,o){n(i).forEach(function(t){return r(t,e,o[0])})}),{setters:[],execute:function(){}}}),System.register("pleier/ng-helper/injector",["pleier/ng-helper/module"],function(e,t){"use strict";var r,n;t&&t.id;return e("getService",function(e){return n.then(function(t){return t.get(e)})}),e("getInjector",function(){return n}),{setters:[function(e){r=e}],execute:function(){n=new Promise(function(e){var t=function(t){return e(t)};t.$inject=["$injector"],r.default.run(t)})}}}),System.register("pleier/ng-helper/facade",["pleier/ng-helper/component","pleier/ng-helper/compose-link","pleier/ng-helper/directive","pleier/ng-helper/lifecycle","pleier/ng-helper/require","pleier/ng-helper/local-template-variable","pleier/ng-helper/injector"],function(e,t){"use strict";t&&t.id;function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)}],execute:function(){}}}),System.register("pleier/directive/yt-slider.directive",["pleier/ng-helper/facade","angular"],function(e,t){"use strict";var r,n,i;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){(i=function(){function e(e,t,r,n,i){this.elm=e,this.attrs=t,this.scope=r,this.$parse=n,this.$document=i,this.ngOnInit()}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attrs.ytSliderDown),r=this.$parse(this.attrs.ytSliderMove),i=this.$parse(this.attrs.ytSlider),o=function(t){var r=e.elm[0].getBoundingClientRect().left;return Math.min(Math.max(0,t-r),e.elm[0].clientWidth)/e.elm[0].clientWidth};this.elm.on("mousedown",function(a){if(0===a.button){var u=o(a.pageX);t(e.scope,{$percentage:u});var s=n.element("<div></div>");s.css("position","absolute"),s.css("width","100%"),s.css("height","100%"),s.css("pointer-events","false"),s.css("top","0"),document.body.appendChild(s[0]);var c=function(t){e.scope.$apply(function(){var n=o(t.pageX);r(e.scope,{$percentage:n})})},l=function(t){e.scope.$apply(function(){var r=o(t.pageX);e.$document.off("mousemove",c),e.$document.off("mouseup",l),s.remove(),i(e.scope,{$percentage:r})})};e.$document.on("mousemove",c),e.$document.on("mouseup",l)}})},e}()).$inject=["$element","$attrs","$scope","$parse","$document"],i=__decorate([r.Directive({selector:"ytSlider"}),__metadata("design:paramtypes",[Object,Object,Object,Function,Object])],i),e("YoutubeSliderDirective",i)}}}),System.register("pleier/util/rx/from-angular-watch.util",["rxjs/Observable"],function(e,t){"use strict";var r;t&&t.id;return e("fromAngularWatch",function(e,t){return r.Observable.create(function(r){var n,i=t.$watch(e,function(e){e!==n&&void 0!==e&&(r.next(e),n=e)});return function(){i()}})}),{setters:[function(e){r=e}],execute:function(){}}}),System.register("pleier/util/rx/scope-destroy.util",["rxjs/Observable"],function(e,t){"use strict";var r;t&&t.id;return e("observeScopeDestroy",function(e){return r.Observable.create(function(t){return e.$on("$destroy",function(){t.next(null),t.complete()})})}),{setters:[function(e){r=e}],execute:function(){}}}),System.register("pleier/util/rx/facade",["rxjs/Observable","rxjs/Observer","rxjs/Subject","rxjs/ReplaySubject","pleier/util/rx/from-angular-watch.util","pleier/util/rx/scope-destroy.util"],function(e,t){"use strict";t&&t.id;function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)}],execute:function(){}}}),System.register("pleier/ng-helper/plain-model",["pleier/ng-helper/module"],function(e,t){"use strict";var r;t&&t.id;return e("PlainModel",function(e){return function(t){var n=Object.keys(e.$inject||{});function i(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n.forEach(function(t,n){e.$inject[t]=r[n]}),e.onDepsLoad&&e.onDepsLoad(),t}r.default.factory(e.name,i),i.$inject=n}}),{setters:[function(e){r=e}],execute:function(){}}}),System.register("pleier/players/youtube/youtube-quality-map.service",[],function(e,t){"use strict";var r,n,i;t&&t.id;return{setters:[],execute:function(){n=function(e){var t={};for(var r in e)t[e[r]]=r;return t}(r={hd1080:"1080p",hd720:"720p",large:"480p",medium:"360p",small:"240p",tiny:"144p",auto:"Auto"}),e("convertToYoutube",i=function(e){return r[e]?r[e]:"Auto"}),e("convertFromYoutube",function(e){return n[e]?n[e]:"default"}),e("convertToYoutubeArray",function(e){return e.map(i)})}}}),System.register("pleier/util/uuid.service",[],function(e,t){"use strict";t&&t.id;return e("uuid",function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}),{setters:[],execute:function(){}}}),System.register("pleier/players/video-player.model",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("pleier/players/youtube/youtube-player.model",["angular","pleier/util/rx/facade","pleier/ng-helper/plain-model","pleier/players/youtube/youtube-quality-map.service","pleier/util/uuid.service"],function(e,t){"use strict";var r,n,i,o,a,u,s;t&&t.id;return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){u={$interval:void 0,$rootScope:void 0},s=function(){function e(e,t){var i=this;this.options=t,this._muted=!1,this._volume=100,this._intendedQuality="default",this.eventEmmiter=new n.Subject,this.playState$=this.fromEvent("onStateChange").filter(function(e){return-1!==[YT.PlayerState.PLAYING,YT.PlayerState.ENDED,YT.PlayerState.PAUSED].indexOf(e.data)}).map(function(e){return{player:i,type:"playstate",isPlaying:e.data===YT.PlayerState.PLAYING,hasEnded:e.data===YT.PlayerState.ENDED}}),this.progress$=this.playState$.switchMap(function(e){return e.isPlaying?n.Observable.interval(100):n.Observable.empty()}).map(function(e){return{player:i,type:"videoprogress",time:i.getCurrentTime()}}),this.loaded$=n.Observable.empty(),this.seeking$=new n.Subject,this.seeked$=new n.Subject,this.ended$=this.fromEvent("onStateChange").map(function(e){return e.data===YT.PlayerState.ENDED||e.data===YT.PlayerState.BUFFERING&&i.getDuration()-i.getCurrentTime()<=1}).filter(function(e){return e}).throttleTime(1e3).map(function(e){return{player:i,type:"ended"}}),this.playbackRate$=this.fromEvent("onPlaybackRateChange").map(function(e){return{player:i,type:"ratechange",rate:i.getPlaybackRate()}}),this.volumeState$=this.eventEmmiter.filter(function(e){return"volumechange"===e.type}).map(function(e){return{player:i,type:"volumechange",volume:i.getVolume(),isMuted:i.isMuted()}}),this.ready$=this.fromEvent("onReady"),this._eventsInitialized=!1,this.destroyed=!1;var o=r.copy(this.options);o.width=t.width,o.height=t.height,this.player=new YT.Player(e[0],o),this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING&&(i.setVolume(i.player.getVolume()),i._setMuted(i.player.isMuted()))})}return e.prototype.load=function(e){var t=this,r=this.fromEvent("onStateChange").filter(function(e){return e.data===YT.PlayerState.PLAYING}).scan(function(e){return e+1},0).filter(function(e){return 1===e}).do(function(e){return t.player.pauseVideo()}).map(function(e){return t});return this.player.loadVideoById(e.youtubeId),r},e.prototype.play=function(){return this.player.playVideo()},e.prototype.pause=function(){return this.player.pauseVideo()},e.prototype.isPlaying=function(){return this.player.getPlayerState()===YT.PlayerState.PLAYING},e.prototype.getDuration=function(){return this.player.getDuration()},e.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},e.prototype.getLoadedPercent=function(){return 100*this.player.getVideoLoadedFraction()},e.prototype.seekTo=function(e){var t=this,r=this.getCurrentTime();return this.player.seekTo(e,!0),this.seeking$.next({player:this,type:"seeking"}),n.Observable.interval(200).map(function(e){return t.getCurrentTime()}).filter(function(t){if(e<r){if(t<r)return!0}else if(t>e||e-t<.1)return!0;return!1}).take(1).mapTo({player:this,type:"seeked"}).subscribe(function(e){return t.seeked$.next(e)}),this.seeked$.take(1).toPromise()},e.prototype.getPlaybackRate=function(){return this.player.getPlaybackRate()},e.prototype.setPlaybackRate=function(e){return this.player.setPlaybackRate(e)},e.prototype.getAvailablePlaybackRates=function(){return this.player.getAvailablePlaybackRates()},e.prototype.toggleMute=function(){this.isMuted()?this.unmute():this.mute()},e.prototype.isMuted=function(){return this._muted||0===this._volume},e.prototype.mute=function(){this.player.mute(),this._setMuted(!0)},e.prototype.unmute=function(){this.player.unMute(),this._setMuted(!1)},e.prototype.setVolume=function(e){var t=this._volume!==e;this._setMuted(0===e),this._volume=e,this.player.setVolume(e),t&&this.eventEmmiter.next({player:this,type:"volumechange"})},e.prototype.getVolume=function(){return this._muted?0:this._volume},e.prototype._setMuted=function(e){var t=this._muted!==e;this._muted=e,e&&0===this._volume?this.setVolume(50):t&&this.eventEmmiter.next({player:this,type:"volumechange"})},e.prototype.setOverlayElement=function(e){this._element=e},e.prototype.getOverlayElement=function(){return this._element},e.prototype.onProgress=function(e,t){void 0===t&&(t=100);var r=null,n=function(){null===r&&(r=u.$interval(e,t))},i=function(){u.$interval.cancel(r),r=null};return this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING?n():i()}),this.getPlayerState()===YT.PlayerState.PLAYING&&n(),function(){i()}},e.prototype.startLoading=function(e){var t,r=this;t=this.on("onStateChange",function(n){n.data===YT.PlayerState.PLAYING&&("number"==typeof e&&r.seekTo(e),t(),r.player.pauseVideo())}),this.player.playVideo()},e.prototype._initializeEventListener=function(){var e=this;if(!this._eventsInitialized){this._eventHash=a.uuid();r.forEach(["onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange","onReady"],function(t){e.player.addEventListener(t,function(r){e.emit(t,r)})}),this._eventsInitialized=!0}},e.prototype.on=function(e,t){return this._initializeEventListener(),u.$rootScope.$on(this._eventHash+e,function(e,r){t(r)})},e.prototype.emit=function(e,t){u.$rootScope.$emit(this._eventHash+e,t)},e.prototype.getHumanPlaybackQuality=function(){return o.convertToYoutube(this.player.getPlaybackQuality())},e.prototype.getHumanIntendedPlaybackQuality=function(e){var t=o.convertToYoutube(this._intendedQuality);return"Auto"===t&&e&&"Auto"!==this.getHumanPlaybackQuality()&&(t+=" ("+this.getHumanPlaybackQuality()+")"),t},e.prototype.setHumanPlaybackQuality=function(e){var t=o.convertFromYoutube(e);this.setPlaybackQuality(t),this.emit("onIntentPlaybackQualityChange")},e.prototype.setPlaybackQuality=function(e){this._intendedQuality=e,this.player.setPlaybackQuality(e)},e.prototype.destroy=function(){this.player.destroy(),this.destroyed=!0},e.prototype.loadVideoById=function(e,t,r){return this.player.loadVideoById(e,t,r),this},e.prototype.fromEvent=function(e){var t=this;return n.Observable.fromEventPattern(function(r){return t.player.addEventListener(e,r)},function(r){t.destroyed||t.player.removeEventListener(e,r)})},e.prototype.getAvailableQualityLevels=function(){return this.player.getAvailableQualityLevels()},e.prototype.getPlayerState=function(){return this.player.getPlayerState()},e}(),s=__decorate([i.PlainModel({name:"YoutubePlayer",$inject:u}),__metadata("design:paramtypes",[Object,Object])],s),e("YoutubePlayer",s)}}}),System.register("pleier/util/algebras/curry",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("pleier/util/algebras/maybe",[],function(e,t){"use strict";var r,n,i,o;t&&t.id;function a(){return new n}function u(e){return new o(e)}return e("nothing",a),e("just",u),e("maybe",function(e){return function(t){return null==t?i:t.map(e)}}),{setters:[],execute:function(){r=function(){function e(){}return e.of=function(e){return u(e)},e.nothing=function(){return a()},e.prototype.of=function(t){return e.of(t)},e.fromNullable=function(e){return null==e?new n:u(e)},e.liftA2=function(t){return function(r){return function(n){return e.of(t).ap(r).ap(n)}}},e}(),e("Maybe",r),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.toString=function(){return"None"},t.prototype.ap=function(e){return new t},t.prototype.map=function(e){return new t},t.prototype.chain=function(e){return new t},t.prototype.reduce=function(e,t){return t},t.prototype.isJust=function(){return!1},t.prototype.isNothing=function(){return!0},t.prototype.get=function(){throw new TypeError("Canno't get value out of Nothing")},t.prototype.getOrElse=function(e){return e},t.prototype.orElse=function(e){return e()},t}(r),e("Nothing",n),e("none",i=new n),o=function(e){function t(t){var r=e.call(this)||this;return r.x=t,r}return __extends(t,e),t.prototype.toString=function(){return"Just("+this.x+")"},t.prototype.ap=function(e){var t=this.x;return e.map(t)},t.prototype.map=function(e){return u(e(this.x))},t.prototype.chain=function(e){return e(this.x)},t.prototype.reduce=function(e,t){return e(t,this.x)},t.prototype.isJust=function(){return!0},t.prototype.isNothing=function(){return!1},t.prototype.get=function(){return this.x},t.prototype.getOrElse=function(e){return this.x},t.prototype.orElse=function(e){return this},t}(r),e("Just",o)}}}),System.register("pleier/util/algebras/maybe-rx",["pleier/util/algebras/maybe","rxjs/Observable"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){r.Just.prototype.toObservable=function(){return n.Observable.of(this.x)},r.Nothing.prototype.toObservable=function(){return n.Observable.throw(null)}}}}),System.register("pleier/players/player-factory.service",["pleier/util/rx/facade","pleier/util/algebras/maybe","pleier/util/algebras/maybe-rx"],function(e,t){"use strict";var r,n,i;t&&t.id;return e("registerVideoPlayer",function(e,t){i[e]=t}),e("createVideoPlayer",function(e,t,o){return n.Maybe.fromNullable(i[e]).toObservable().switchMap(function(e){return e.createVideoPlayer(t,o)}).catch(function(t){return r.Observable.throw('Video player "'+e+'" not found')})}),{setters:[function(e){r=e},function(e){n=e},function(e){}],execute:function(){i={}}}}),System.register("pleier/players/pleier.component",["angular","pleier/util/rx/facade","rxjs/ReplaySubject","pleier/ng-helper/facade","pleier/players/player-factory.service"],function(e,t){"use strict";var r,n,i,o,a,u,s,c,l;t&&t.id;function p(e,t){switch(e){case"HTML5Player":return function(e){var t={player:"HTML5Player"};return l.forEach(function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}(t);case"YoutubePlayer":return function(e){var t={player:"YoutubePlayer",videoId:null,playerVars:{}};return s.forEach(function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),c.forEach(function(r){e.hasOwnProperty(r)&&(t.playerVars[r]=e[r])}),t}(t)}}function f(e){return"number"==typeof e||/^\d+$/.test(e)?e+"px":e}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){(u=function(){function e(e,t,r){this.elm=e,this.attrs=t,this.scope=r,this.setOverlayElement(e)}return e.prototype.setOverlayElement=function(e){this.$overlayElm=e},e.prototype.getOverlayElement=function(){return this.$overlayElm},e.prototype.$onInit=function(){var e=this,t=r.element(this.elm[0].querySelector(".hr-yt-video-place-holder")),o=n.fromAngularWatch(function(){return e.videoSource},this.scope).publishReplay(1).refCount(),u=n.observeScopeDestroy(this.scope);this.player$=o.map(function(t){return{playerClass:t.player,options:p(t.player,e.attrs)}}).switchMap(function(r){var n=r.playerClass,i=r.options;return a.createVideoPlayer(n,i,t).do(function(t){e.elm.css("display","block"),e.elm.css("height",f(t.options.height)),e.elm.css("width",f(t.options.width))})}).withLatestFrom(o,function(e,t){return{player:e,source:t}}).switchMap(function(e){var t=e.player,r=e.source;return t.load(r)}).takeUntil(u).multicast(function(){return new i.ReplaySubject(1)}).refCount(),this.player$.subscribe(function(){},function(e){return console.error("There was a problem loading the video player: "+e)})},e}()).$inject=["$element","$attrs","$scope"],u=__decorate([o.Component({selector:"pleier",templateUrl:"/template/players/pleier.component.html",transclude:!0,link:o.localTemplateVariableLink,scope:{videoSource:"="}}),__metadata("design:paramtypes",[Object,Object,Object])],u),e("PleierComponent",u),s=["height","width"],c=["autohide","autoplay","color","controls","disablekb","enablejsapi","end","fs","list","listType","loop","modestbranding","origin","playlist","rel","showinfo","start"],l=["height","width"]}}}),System.register("pleier/overlay/player-current-quality.directive",["pleier/ng-helper/facade"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e}],execute:function(){(n=function(){function e(e,t){this.elm=e,this.attrs=t}return e.prototype.ngOnInit=function(){var e=this;this.pleier.player$.subscribe(function(t){var r=function(){var r;if(e.attrs.hasOwnProperty("intendedQuality")){var n=!1;e.attrs.hasOwnProperty("showRealAuto")&&(n=!0),r=t.getHumanIntendedPlaybackQuality(n)}else r=t.getHumanPlaybackQuality();e.elm.html(r)};t.on("onPlaybackQualityChange",r),t.on("onIntentPlaybackQualityChange",r),r()})},e}()).$inject=["$element","$attrs"],n=__decorate([r.Directive({selector:"playerCurrentQuality",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"]}),__metadata("design:paramtypes",[Object,Object])],n),e("PlayerCurrentQualityComponent",n)}}}),System.register("pleier/overlay/player-current-speed.directive",["pleier/util/rx/facade","pleier/ng-helper/facade"],function(e,t){"use strict";var r,n,i;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){(i=function(){function e(e,t,r,n){this.$scope=e,this.elm=t,this.attr=r,this.$parse=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attr.playerCurrentSpeed)(this.$scope),n=r.observeScopeDestroy(this.$scope);t.switchMap(function(e){return e.playbackRate$}).map(function(e){return e.rate}).takeUntil(n).subscribe(function(t){e.elm.html(t.toString())})},e}()).$inject=["$scope","$element","$attrs","$parse"],i=__decorate([n.Directive({selector:"playerCurrentSpeed",link:n.mockNgOnInitFromAttr("playerCurrentSpeed")}),__metadata("design:paramtypes",[Object,Object,Object,Function])],i),e("PlayerCurrentSpeedDirective",i)}}}),System.register("pleier/util/readable-time.util",[],function(e,t){"use strict";t&&t.id;return e("readableTime",function(e){var t=(e=Math.floor(e))%60,r=Math.floor(e/60),n=Math.floor(r/60);return r%=60,n>0?n+":"+String("00"+r).slice(-2)+":"+String("00"+t).slice(-2):r+":"+String("00"+t).slice(-2)}),{setters:[],execute:function(){}}}),System.register("pleier/overlay/player-current-time.directive",["pleier/util/rx/facade","pleier/ng-helper/facade","pleier/util/readable-time.util"],function(e,t){"use strict";var r,n,i,o;t&&t.id;return{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){(o=function(){function e(e,t,r,n){this.$scope=e,this.elm=t,this.attr=r,this.$parse=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attr.playerCurrentTime)(this.$scope),n=r.observeScopeDestroy(this.$scope);t.switchMap(function(e){return r.Observable.merge(e.progress$,e.seeked$).mapTo(e)}).map(function(e){return e.getCurrentTime()}).map(function(e){return i.readableTime(e)}).takeUntil(n).subscribe(function(t){return e.elm.html(t)})},e}()).$inject=["$scope","$element","$attrs","$parse"],o=__decorate([n.Directive({selector:"playerCurrentTime",link:n.mockNgOnInitFromAttr("playerCurrentTime")}),__metadata("design:paramtypes",[Object,Object,Object,Function])],o),e("PlayerCurrentTimeComponent",o)}}}),System.register("pleier/overlay/player-panel.component",["pleier/ng-helper/facade"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e}],execute:function(){(n=function(){function e(e,t,r,n){this.elm=e,this.attrs=t,this.$animate=r,this.$timeout=n}return e.prototype.ngOnInit=function(){var e=this,t=this.pleier.getOverlayElement();this.pleier.player$.subscribe(function(r){var n={},i=function(t){n[t]=!0,e.$animate.addClass(e.elm,"ng-show")},o=function(t){delete n[t],0===Object.keys(n).length&&e.$animate.removeClass(e.elm,"ng-show")};if("showOnHover"in e.attrs&&!1!==e.attrs.showOnHover){var a=parseInt(e.attrs.showOnHover),u=null,s=function(){null!==u&&e.$timeout.cancel(u),u=null};t.on("mouseenter",function(){s(),i("showOnHover"),isNaN(a)||(u=e.$timeout(function(){return o("showOnHover")},a))}),t.on("mouseleave",function(){s(),o("showOnHover")})}var c=function(e){e.data===YT.PlayerState.PLAYING?o("showOnPause"):i("showOnPause")};"showOnPause"in e.attrs&&!1!==e.attrs.showOnPause&&(r.on("onStateChange",c),c({data:r.getPlayerState()}))})},e}()).$inject=["$element","$attrs","$animate","$timeout"],n=__decorate([r.Component({selector:"playerPanel",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"],transclude:!0,templateUrl:"/template/overlay/player-panel.component.html"}),__metadata("design:paramtypes",[Object,Object,Object,Function])],n),e("PlayerPanelComponent",n)}}}),System.register("pleier/players/youtube/youtube.service",["pleier/util/rx/facade","pleier/players/player-factory.service","pleier/ng-helper/facade"],function(e,t){"use strict";var r,n,i,o,a;t&&t.id;function u(e,t){var n=function(e){return __assign({},a,e,{playerVars:__assign({},a.playerVars,e.playerVars)})}(e);return o.switchMap(function(e){return o=t,a=n,r.Observable.create(function(e){var t;return i.getService("YoutubePlayer").then(function(e){return new e(o,a)}).then(function(r){t=r,e.next(t)}),function(){t&&t.destroy()}});var o,a}).switchMap(function(e){return e.ready$.mapTo(e)})}return e("createVideoPlayer",u),e("setYoutubeDefaultOption",function(e,t){a[e]=t}),e("setYoutubeDefaultOptions",function(e){a=e}),e("setPlayerVarDefaultOption",function(e,t){a.playerVars[e]=t}),e("setPlayerVarDefaultOptions",function(e){a.playerVars=e}),{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){o=new r.ReplaySubject(1),n.registerVideoPlayer("YoutubePlayer",{createVideoPlayer:u}),a={playerVars:{origin:location.origin+"/",enablejsapi:1},height:"100%",width:"100%"},window.onYouTubeIframeAPIReady=function(){o.next(null)},!0;var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}}),System.register("pleier/players/html5/html5-player.model",["angular","pleier/util/rx/facade","rxjs/BehaviorSubject","pleier/ng-helper/plain-model"],function(e,t){"use strict";var r,n,i,o,a;t&&t.id;return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e,t){var o=this;this.options=t,this.video=document.createElement("video"),this.ready$=new i.BehaviorSubject(this),this.playState$=n.Observable.merge(n.Observable.fromEvent(this.video,"play").mapTo({player:this,type:"playstate",isPlaying:!0,hasEnded:this.video.ended}),n.Observable.fromEvent(this.video,"pause").mapTo({player:this,type:"playstate",isPlaying:!1,hasEnded:this.video.ended})),this.progress$=this.playState$.switchMap(function(e){return e.isPlaying?n.Observable.interval(100):n.Observable.empty()}).map(function(e){return{player:o,type:"videoprogress",time:o.getCurrentTime()}}),this.loaded$=n.Observable.fromEvent(this.video,"progress").map(function(e){return{player:o,type:"loaded",loaded:o.getLoadedPercent()}}),this.seeking$=n.Observable.fromEvent(this.video,"seeking").map(function(e){return{player:o,type:"seeking"}}),this.seeked$=n.Observable.fromEvent(this.video,"seeked").map(function(e){return{player:o,type:"seeked"}}),this.ended$=n.Observable.fromEvent(this.video,"ended").map(function(e){return{player:o,type:"ended"}}),this.playbackRate$=n.Observable.fromEvent(this.video,"ratechange").map(function(e){return{player:o,type:"ratechange",rate:o.getPlaybackRate()}}),this.volumeState$=n.Observable.fromEvent(this.video,"volumechange").map(function(e){return{player:o,type:"volumechange",volume:o.getVolume(),isMuted:o.isMuted()}});var a=r.element(this.video);a.css("display","block"),a.css("height","100%"),a.css("width","100%"),r.element(e).replaceWith(a)}return e.prototype.load=function(e){return this.setVideoSources(e),n.Observable.fromEvent(this.video,"loadedmetadata").mapTo(this)},e.prototype.setVideoSources=function(e){var t=r.element(this.video);t.empty(),e.sources.map(function(e){return r.element('<source src="'+e.src+'" type="'+e.type+'">')}).forEach(function(e){return t.append(e)})},e.prototype.play=function(){this.video.play()},e.prototype.pause=function(){this.video.pause()},e.prototype.isPlaying=function(){return!this.video.paused},e.prototype.getDuration=function(){return this.video.duration},e.prototype.getCurrentTime=function(){return this.video.currentTime},e.prototype.getLoadedPercent=function(){for(var e=this.video.buffered,t=Number.NEGATIVE_INFINITY,r=0;r<e.length;r++){var n=e.end(r);t=Math.max(t,n)}return t/this.getDuration()*100},e.prototype.seekTo=function(e){return this.video.currentTime=e,this.seeked$.take(1).toPromise()},e.prototype.getPlaybackRate=function(){return this.video.playbackRate},e.prototype.setPlaybackRate=function(e){this.video.playbackRate=e},e.prototype.getAvailablePlaybackRates=function(){return[1,1.25,1.5,1.75,2]},e.prototype.toggleMute=function(){this.isMuted()?this.unmute():this.mute()},e.prototype.isMuted=function(){return this.video.muted||0===this.video.volume},e.prototype.mute=function(){this.video.muted=!0},e.prototype.unmute=function(){this.video.muted=!1,0===this.video.volume&&(this.video.volume=.5)},e.prototype.setVolume=function(e){this.video.volume=e/100,this.video.muted=0===e},e.prototype.getVolume=function(){return this.video.muted?0:100*this.video.volume},e.prototype.setOverlayElement=function(e){},e.prototype.destroy=function(){},e}(),a=__decorate([o.PlainModel({name:"HTML5Player"}),__metadata("design:paramtypes",[Object,Object])],a),e("HTML5Player",a)}}}),System.register("pleier/players/html5/html5-player.service",["pleier/util/rx/facade","pleier/players/html5/html5-player.model","pleier/players/player-factory.service","pleier/ng-helper/facade"],function(e,t){"use strict";var r,n,i,o,a;t&&t.id;function u(e,t){return o.getService("HTML5Player").then(function(r){return new r(e,t)}).then(function(e){return e.ready$.take(1).toPromise()})}function s(e,t){return r.Observable.create(function(r){var n;return e.height=e.height||"100%",e.width=e.width||"100%",u(t,e).then(function(e){n=e,r.next(n)}),function(){n&&n.destroy()}})}return e("loadPlayer",u),e("createVideoPlayer",s),{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e}],execute:function(){n.HTML5Player,a={createVideoPlayer:s},i.registerVideoPlayer("HTML5Player",a)}}}),System.register("pleier/players/facade",["pleier/players/pleier.component","pleier/players/youtube/youtube-player.model","pleier/players/youtube/youtube.service","pleier/players/html5/html5-player.service"],function(e,t){"use strict";t&&t.id;function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){}],execute:function(){}}}),System.register("pleier/markers/marker.model",[],function(e,t){"use strict";t&&t.id;function r(e,t){var r=t[0],n=t[1];return e>r&&e<n}return{setters:[],execute:function(){e("startedIn",function(e,t){return r(e.startTime,t)}),e("endedIn",function(e,t){return r(e.endTime,t)}),e("timeInMarkerRange",function(e,t){return r=e,n=[t.startTime,t.endTime],i=n[0],o=n[1],r>=i&&r<=o;var r,n,i,o})}}}),System.register("pleier/markers/component-marker.model",["angular","pleier/ng-helper/facade"],function(e,t){"use strict";var r,n,i,o;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=n.getService("$compile"),o=function(){function e(e){this.options=e,this.parentScope=this.options.parentScope?Promise.resolve(this.options.parentScope):n.getService("$rootScope")}return Object.defineProperty(e.prototype,"startTime",{get:function(){return this.options.startTime},set:function(e){this.options.startTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this.options.endTime},set:function(e){this.options.endTime=e},enumerable:!0,configurable:!0}),e.prototype.onStart=function(e){this.options.parentElm?this.render({player:e,parentElm:this.options.parentElm}):console.error("Component marker needs a parent element",this.options.template)},e.prototype.render=function(e){var t=this,n=e.parentScope?Promise.resolve(e.parentScope):this.parentScope,o=__assign({},this.options.bindings,e.bindings);this.elm=r.element(this.options.template),e.parentElm.append(this.elm);var a=i.then(function(e){return e(t.elm)});Promise.all([a,n]).then(function(r){var n=r[0],i=r[1];t.scope=i.$new(!0),t.scope.$player=e.player,Object.keys(o||{}).forEach(function(e){return t.scope[e]=t.options.bindings[e]}),n(t.scope)}).catch(function(e){return console.error("Cant create marker component",e)})},e.prototype.onEnd=function(e){null!==this.elm&&(this.scope.$destroy(),this.elm.remove(),this.scope=null,this.elm=null)},e}(),e("ComponentMarker",o)}}}),System.register("pleier/util/store.util",["rxjs/BehaviorSubject","rxjs/add/operator/delay"],function(e,t){"use strict";var r,n;t&&t.id;return e("combineReducers",function(e){return function(t,r){return void 0===t&&(t={}),Object.keys(e).reduce(function(n,i){return n[i]=e[i](t[i],r),n},{})}}),{setters:[function(e){r=e},function(e){}],execute:function(){n=function(){function e(e){this.reducer=e;this._dispacher=new r.BehaviorSubject(e(void 0,{type:"___INITIAL_ACTION___"})),this._state=this._dispacher.delay(0)}return e.prototype.dispatch=function(e){this._dispacher.next(this.reducer(this._dispacher.value,e))},e.prototype.select=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._state.map(function(t){return e.reduce(function(e,t){return"object"==typeof e?e[t]:e},t)}).distinctUntilChanged()},e}(),e("Store",n)}}}),System.register("pleier/util/immutable/array.util",[],function(e,t){"use strict";t&&t.id;return e("concatUnique",function(e,t){return e.concat(t.filter(function(t){return-1===e.indexOf(t)}))}),e("removeItem",function(e,t){var r=t.indexOf(e);return-1===r?t:t.slice(0,r).concat(t.slice(r+1))}),{setters:[],execute:function(){}}}),System.register("pleier/util/immutable/facade",["pleier/util/immutable/array.util"],function(e,t){"use strict";t&&t.id;return{setters:[function(t){!function(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}(t)}],execute:function(){}}}),System.register("pleier/markers/marker-runner.service",["pleier/markers/marker.model","rxjs/Observable","pleier/util/store.util","pleier/util/immutable/facade"],function(e,t){"use strict";var r,n,i,o,a;t&&t.id;return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){return function(e,t){var a=this;this.player=e;var u=function(e){return i.combineReducers({idle:function(t,r){switch(void 0===t&&(t=e),r.type){case"START_MARKERS":return t.filter(function(e){return-1===r.payload.markers.indexOf(e)});case"END_MARKERS":return o.concatUnique(t,r.payload.markers);default:return t}},running:function(e,t){switch(void 0===e&&(e=[]),t.type){case"START_MARKERS":return o.concatUnique(e,t.payload.markers);case"END_MARKERS":return e.filter(function(e){return-1===t.payload.markers.indexOf(e)});default:return e}},progressRange:function(e,t){switch(void 0===e&&(e=[-1,-1]),t.type){case"PROGRESS_UPDATE":return[Math.max(e[1],t.payload.time-1),t.payload.time];case"SEEK_FINISHED":return[t.payload.time,t.payload.time];default:return e}}})}(t);this.state=new i.Store(u);var s=this.state.select("idle"),c=this.state.select("running"),l=this.state.select("progressRange"),p=this.player.seeked$.map(function(e){return e.player.getCurrentTime()}),f=l.withLatestFrom(s,function(e,t){return{range:e,markers:t}}).map(function(e){var t=e.range;return e.markers.filter(function(e){return r.startedIn(e,t)})}).filter(function(e){return e.length>0}),d=p.withLatestFrom(s,function(e,t){return{time:e,markers:t}}).map(function(e){var t=e.time;return e.markers.filter(function(e){return r.timeInMarkerRange(t,e)})}).filter(function(e){return e.length>0}),y=n.Observable.merge(f,d).share(),m=l.map(function(e){return e[1]}).withLatestFrom(c,function(e,t){return{time:e,markers:t}}).map(function(e){var t=e.markers,n=e.time;return t.filter(function(e){return!r.timeInMarkerRange(n,e)})}).filter(function(e){return e.length>0}),h=p.withLatestFrom(c,function(e,t){return{time:e,markers:t}}).map(function(e){var t=e.markers,n=e.time;return t.filter(function(e){return!r.timeInMarkerRange(n,e)})}).filter(function(e){return e.length>0}),v=n.Observable.merge(m,h).share(),g=v.map(function(e){return{type:"END_MARKERS",payload:{markers:e}}}),b=y.map(function(e){return{type:"START_MARKERS",payload:{markers:e}}}),S=this.player.progress$.map(function(e){return{type:"PROGRESS_UPDATE",payload:{time:e.time}}}),$=p.map(function(e){return{type:"SEEK_FINISHED",payload:{time:e}}});n.Observable.merge(g,b,S,$).subscribe(function(e){return a.state.dispatch(e)}),y.switchMap(function(e){return n.Observable.from(e)}).subscribe(function(t){return t.onStart(e)}),v.switchMap(function(e){return n.Observable.from(e)}).filter(function(e){return"function"==typeof e.onEnd}).subscribe(function(t){return t.onEnd(e)})}}(),e("MarkerRunner",a)}}}),System.register("pleier/markers/facade",["pleier/markers/component-marker.model","pleier/markers/marker-runner.service"],function(e,t){"use strict";t&&t.id;function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}return{setters:[function(e){r(e)},function(e){r(e)}],execute:function(){}}}),System.register("pleier/overlay/progress-bar/progress-bar-marker.component",["pleier/ng-helper/facade","pleier/util/rx/facade"],function(e,t){"use strict";var r,n,i;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){(i=function(){function e(e,t){this.elm=e,this.scope=t}return e.prototype.$onInit=function(){var e=this,t=n.observeScopeDestroy(this.scope);this.player.takeUntil(t).subscribe(function(t){var r=t.getDuration();e.barCssClass&&e.elm.addClass(e.barCssClass);var n;n=100*e.marker.startTime/r,e.elm.css("left",n+"%")})},e}()).$inject=["$element","$scope"],i=__decorate([r.Component({selector:"progressBarMarker",scope:{player:"<",marker:"<",barCssClass:"<?"}}),__metadata("design:paramtypes",[Object,Object])],i),e("ProgressBarMarker",i)}}}),System.register("pleier/overlay/progress-bar/player-progress-bar-hover-indicator.component",["pleier/ng-helper/facade","pleier/util/readable-time.util"],function(e,t){"use strict";var r,n,i;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){(i=function(){function e(e,t,r,n,i,o){this.elm=e,this.$document=t,this.$compile=r,this.$templateCache=n,this.$http=i,this.scope=o}return e.prototype.ngOnInit=function(){var e=this,t=this.$http.get("/template/overlay/progress-bar/player-progress-bar-hover-indicator.component.html",{cache:this.$templateCache}).then(function(e){return e.data}),r=null,i=this.scope.$new(!0);t.then(function(t){(r=e.$compile(t)(i)).addClass("ng-hide"),e.elm.parent().append(r)}),this.pleier.player$.subscribe(function(t){var o=t.getDuration(),a=function(t){var a,u,s=(a=t.pageX,u=e.elm[0].getBoundingClientRect().left,Math.min(Math.max(0,a-u),e.elm[0].clientWidth)/e.elm[0].clientWidth);i.$apply(function(e){e.time=n.readableTime(s*o)}),r.css("left",100*s+"%")};e.elm.on("mouseenter",function(){e.$document.on("mousemove",a),r.removeClass("ng-hide")}),e.elm.on("mouseleave",function(){e.$document.off("mousemove",a),r.addClass("ng-hide")})})},e}()).$inject=["$element","$document","$compile","$templateCache","$http","$scope"],i=__decorate([r.Directive({selector:"hoverIndicator",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"]}),__metadata("design:paramtypes",[Object,Object,Function,Object,Function,Object])],i),e("HoverIndicatorComponent",i)}}}),System.register("pleier/overlay/progress-bar/player-progress-bar.component",["pleier/util/rx/facade","pleier/ng-helper/facade","pleier/util/store.util","angular"],function(e,t){"use strict";var r,n,i,o,a,u;t&&t.id;function s(e,t){switch(void 0===e&&(e=a),t.type){case"SET_WAS_PLAYING":return __assign({},e,{wasPlaying:t.payload});case"START_SEEKING":return __assign({},e,{isSeeking:!0});case"STOP_SEEKING":return __assign({},e,{isSeeking:!1,seekPercentage:t.payload});default:return e}}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e}],execute:function(){a={wasPlaying:!1,isSeeking:!1,seekPercentage:0},(u=function(){function e(e,t){this.elm=e,this.scope=t,this.sliderDown$=new r.Subject,this.sliderMove$=new r.Subject,this.sliderUp$=new r.Subject}return e.prototype.ngOnInit=function(){var e=this,t=o.element(this.elm[0].querySelector(".hr-yt-played")),n=o.element(this.elm[0].querySelector(".hr-yt-loaded")),a=o.element(this.elm[0].querySelector(".hr-yt-handle")),u=new i.Store(s),c=r.observeScopeDestroy(this.scope),l=u.select().distinctUntilChanged(function(e,t){return e.isSeeking===t.isSeeking}),p=this.player.switchMap(function(e){return r.Observable.merge(e.progress$,e.loaded$,e.seeked$).map(function(t){return e.getCurrentTime()/e.getDuration()})});l.switchMap(function(t){return t.isSeeking?e.sliderMove$:p}).withLatestFrom(this.player,function(e,t){return{time:Math.round(t.getDuration()*e),duration:t.getDuration(),loaded:t.getLoadedPercent()}}).takeUntil(c).subscribe(function(r){return function(r,i,o){var u=100*r/i,s=u*e.elm[0].clientWidth/100-7.5;s=Math.min(Math.max(0,s),e.elm[0].clientWidth-15),n.css("width",o+"%"),t.css("width",u+"%"),a.css("left",s+"px")}(r.time,r.duration,r.loaded)}),u.select().switchMap(function(t){return t.isSeeking?r.Observable.empty():e.player.switchMap(function(e){return e.playState$}).map(function(e){return e.isPlaying})}).takeUntil(c).subscribe(function(e){return u.dispatch({type:"SET_WAS_PLAYING",payload:e})}),l.withLatestFrom(this.player,function(e,t){return{state:e,player:t}}).takeUntil(c).subscribe(function(e){var t=e.state,r=e.player;t.isSeeking?r.pause():r.seekTo(t.seekPercentage*r.getDuration()).then(function(e){t.wasPlaying&&r.play()})}),r.Observable.merge(this.sliderDown$.mapTo({type:"START_SEEKING"}),this.sliderUp$.map(function(e){return{type:"STOP_SEEKING",payload:e}})).takeUntil(c).subscribe(function(e){return u.dispatch(e)})},e}()).$inject=["$element","$scope"],u=__decorate([n.Component({selector:"playerProgressBar",templateUrl:"/template/overlay/progress-bar/player-progress-bar.component.html",scope:{markers:"<?",player:"<"},link:n.mockNgOnInitLink(["player"])}),__metadata("design:paramtypes",[Object,Object])],u),e("PlayerProgressBar",u)}}}),System.register("pleier/overlay/player-repeat-available-quality.directive",["pleier/ng-helper/facade"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e}],execute:function(){(n=function(){function e(){}return e.prototype.ngOnInit=function(){this.pleier.player$.subscribe(function(e){})},e}()).$inject=["$scope","$attrs"],n=__decorate([r.Directive({selector:"playerRepeatAvailableQuality",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"],replace:!0,priority:1e3,template:function(e){return e.removeAttr("player-repeat-available-quality"),e.attr("ng-repeat","$quality in availableQuality"),e[0].outerHTML}}),__metadata("design:paramtypes",[])],n),e("PlayerRepeatAvailableQualityDirective",n)}}}),System.register("pleier/overlay/player-repeat-available-speed.directive",["pleier/ng-helper/facade"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e}],execute:function(){(n=function(){function e(e,t){this.scope=e,this.attrs=t}return e.prototype.ngOnInit=function(){var e=this;this.pleier.player$.subscribe(function(t){e.scope.availableSpeeds=t.getAvailablePlaybackRates(),e.attrs.hasOwnProperty("reverse")&&e.scope.availableSpeeds.reverse()})},e}()).$inject=["$scope","$attrs"],n=__decorate([r.Directive({selector:"playerRepeatAvailableSpeed",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"],replace:!0,priority:1e3,template:function(e){return e.removeAttr("player-repeat-available-speed"),e.attr("ng-repeat","$speed in availableSpeeds"),e[0].outerHTML}}),__metadata("design:paramtypes",[Object,Object])],n),e("PlayerRepeatAvailableSpeedDirective",n)}}}),System.register("pleier/overlay/player-set-quality.directive",["pleier/ng-helper/facade"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e}],execute:function(){(n=function(){function e(e,t,r,n){this.elm=e,this.$parse=t,this.attrs=r,this.scope=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attrs.playerSetQuality);this.pleier.player$.subscribe(function(r){return e.elm.on("click",function(){return e.scope.$apply(function(){return r.setHumanPlaybackQuality(t(e.scope))})})})},e}()).$inject=["$element","$parse","$attrs","$scope"],n=__decorate([r.Directive({selector:"playerSetQuality",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"]}),__metadata("design:paramtypes",[Object,Function,Object,Object])],n),e("PlayerSetQualityDirective",n)}}}),System.register("pleier/overlay/player-set-speed.directive",["pleier/ng-helper/facade"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e}],execute:function(){(n=function(){function e(e,t,r,n){this.elm=e,this.attrs=t,this.$parse=r,this.scope=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attrs.playerSetSpeed);this.pleier.player$.subscribe(function(r){return e.elm.on("click",function(){return e.scope.$apply(function(){var n=t(e.scope);r.setPlaybackRate(n)})})})},e}()).$inject=["$element","$attrs","$parse","$scope"],n=__decorate([r.Directive({selector:"playerSetSpeed",link:r.bindToCtrlCallOnInit(["pleier"]),require:["^pleier"]}),__metadata("design:paramtypes",[Object,Object,Function,Object])],n),e("PlayerSetSpeedDirective",n)}}}),System.register("pleier/overlay/player-total-time.directive",["pleier/ng-helper/facade","pleier/util/readable-time.util"],function(e,t){"use strict";var r,n,i;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){(i=function(){function e(e,t,r,n){this.$scope=e,this.elm=t,this.attr=r,this.$parse=n}return e.prototype.ngOnInit=function(){var e=this;this.$parse(this.attr.playerTotalTime)(this.$scope).map(function(e){return e.getDuration()}).map(function(e){return n.readableTime(e)}).subscribe(function(t){return e.elm.html(t)})},e}()).$inject=["$scope","$element","$attrs","$parse"],i=__decorate([r.Directive({selector:"playerTotalTime",link:r.mockNgOnInitFromAttr("playerTotalTime"),require:["^pleier"]}),__metadata("design:paramtypes",[Object,Object,Object,Function])],i),e("PlayerTotalTimeDirective",i)}}}),System.register("pleier/overlay/player-volume-horizontal.component",["angular","pleier/util/rx/facade","pleier/ng-helper/facade"],function(e,t){"use strict";var r,n,i,o;t&&t.id;return{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){(o=function(){function e(e,t){this.elm=e,this.$scope=t,this.$volumeBar=r.element(this.elm[0].querySelector(".hr-yt-volume-hr-bar")),this.$settedBar=r.element(this.elm[0].querySelector(".hr-yt-setted")),this.$handle=r.element(this.elm[0].querySelector(".hr-yt-handle"))}return e.prototype.updateVolumeBar=function(e){var t=e*this.$volumeBar[0].clientWidth-this.$handle[0].clientWidth/2;t=Math.min(Math.max(0,t),this.$volumeBar[0].clientWidth-this.$handle[0].clientWidth/2),this.$settedBar.css("width",100*e+"%"),this.$handle.css("left",t+"px")},e.prototype.ngOnInit=function(){var e=this,t=n.observeScopeDestroy(this.$scope);this.player.switchMap(function(e){return e.volumeState$.mapTo(e)}).merge(this.player.take(1)).map(function(e){return e.getVolume()}).takeUntil(t).subscribe(function(t){e.updateVolumeBar(t/100)}),this.isMuted=this.player.switchMap(function(e){return e.volumeState$.mapTo(e)}).merge(this.player.take(1)).map(function(e){return e.isMuted()}).takeUntil(t)},e.prototype.updateVolume=function(e){this.setVolume(e),this.updateVolumeBar(e)},e.prototype.setVolume=function(e){this.player.take(1).subscribe(function(t){return t.setVolume(100*e)})},e.prototype.toggleMute=function(){this.player.take(1).subscribe(function(e){return e.toggleMute()})},e}()).$inject=["$element","$scope"],o=__decorate([i.Component({selector:"playerVolumeHorizontal",templateUrl:"/template/overlay/player-volume-horizontal.component.html",link:i.composeLinkFn([i.mockNgOnInitLink(["player"]),i.localTemplateVariableLink]),scope:{player:"="},transclude:!0}),__metadata("design:paramtypes",[Object,Object])],o),e("PlayerVolumeHorizontalComponent",o)}}}),System.register("pleier/overlay/facade",["pleier/overlay/player-current-quality.directive","pleier/overlay/player-current-speed.directive","pleier/overlay/player-current-time.directive","pleier/overlay/player-panel.component","pleier/overlay/progress-bar/progress-bar-marker.component","pleier/overlay/progress-bar/player-progress-bar-hover-indicator.component","pleier/overlay/progress-bar/player-progress-bar.component","pleier/overlay/player-repeat-available-quality.directive","pleier/overlay/player-repeat-available-speed.directive","pleier/overlay/player-set-quality.directive","pleier/overlay/player-set-speed.directive","pleier/overlay/player-total-time.directive","pleier/overlay/player-volume-horizontal.component"],function(e,t){"use strict";t&&t.id;function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)}],execute:function(){}}}),System.register("pleier/util/rx/rx-operators-import",["rxjs/add/observable/fromPromise","rxjs/add/observable/fromEventPattern","rxjs/add/observable/fromEvent","rxjs/add/observable/from","rxjs/add/observable/of","rxjs/add/observable/merge","rxjs/add/observable/throw","rxjs/add/observable/empty","rxjs/add/observable/interval","rxjs/add/operator/map","rxjs/add/operator/mapTo","rxjs/add/operator/merge","rxjs/add/operator/scan","rxjs/add/operator/withLatestFrom","rxjs/add/operator/filter","rxjs/add/operator/switchMap","rxjs/add/operator/catch","rxjs/add/operator/startWith","rxjs/add/operator/toPromise","rxjs/add/operator/distinctUntilChanged","rxjs/add/operator/delay","rxjs/add/operator/throttleTime","rxjs/add/operator/take","rxjs/add/operator/takeUntil","rxjs/add/operator/last","rxjs/add/operator/do","rxjs/add/operator/publishReplay","rxjs/add/operator/share","rxjs/add/operator/multicast"],function(e,t){"use strict";t&&t.id;return{setters:[function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){}],execute:function(){}}}),System.register("pleier/main",["pleier/directive/yt-slider.directive","pleier/overlay/facade","pleier/markers/facade","pleier/players/facade","pleier/util/rx/rx-operators-import"],function(e,t){"use strict";t&&t.id;function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){}],execute:function(){}}}),System.register("pleier/ng-helper/async.filter",["angular"],function(e,t){"use strict";var r;t&&t.id;function n(){var e={},t={};function r(r,i){if(!r||!r.subscribe&&!r.then)return r;var o=function(e){e.hasOwnProperty("__asyncFilterObjectID__")||(e.__asyncFilterObjectID__=++n);return e.__asyncFilterObjectID__}(r);if(!(o in t)){var a=r.subscribe&&r.subscribe.bind(r)||r.success&&r.success.bind(r)||r.then.bind(r);t[o]=a(function(t){e[o]=t,i&&i.$applyAsync&&i.$applyAsync()}),i&&i.$on&&i.$on("$destroy",function(){t[o]&&t[o].dispose&&t[o].dispose(),delete t[o],delete e[o]})}return e[o]}var n=0;return r.$stateful=!0,r}return{setters:[function(e){r=e}],execute:function(){r.module("pleier").filter("async",n)}}}),System.register("pleier/util/rx/debug/console.util",["pleier/util/algebras/maybe"],function(e,t){"use strict";var r,n,i;t&&t.id;function o(){return r.Maybe.fromNullable(localStorage.getItem("rxdbg")).map(function(e){return JSON.parse(e)}).orElse(function(){return r.Maybe.of({loggerData:{}})})}function a(e){return o().chain(function(t){return r.Maybe.fromNullable(t.loggerData[e.toString()])}).orElse(function(){return r.Maybe.of({enabled:!0,name:e.toString()})})}function u(){i.forEach(function(e,t){var r="%c ["+t+"] - "+e.toString();console.info(r,function(e){return"color: "+function(e){return e.enabled?"#000":"#AAA"}(e)}(e))})}function s(e){if("string"==typeof e){for(var t=0;t<i.length;t++)if(i[t].name===e)return r.Maybe.of(i[t]);return r.nothing()}return r.Maybe.fromNullable(i[e])}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach(function(e){s(e).map(function(e){return e.enabled=!0})})}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach(function(e){s(e).map(function(e){return e.enabled=!1})})}function p(e,t){s(e).map(function(e){return e.name=t})}return e("createDebugger",function(e){var t=new n(e,console.debug);return i.push(t),function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.log.apply(t,e)}}),e("createInfo",function(e){var t=new n(e,console.info);return i.push(t),function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.log.apply(t,e)}}),e("debug",function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];console.debug.apply(console,[e].concat(t))}),{setters:[function(e){r=e}],execute:function(){n=function(){function e(e,t){this.msgOrFnMsg=e,this.logFn=t}return Object.defineProperty(e.prototype,"enabled",{get:function(){return a(this.msgOrFnMsg).map(function(e){return e.enabled}).get()},set:function(e){var t,r,n,i;t=this.msgOrFnMsg,r=e,n=o().get(),i=a(t).map(function(e){return __assign({},e,{enabled:r})}),n.loggerData[t.toString()]=i.get(),localStorage.setItem("rxdbg",JSON.stringify(n))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return a(this.msgOrFnMsg).map(function(e){return e.name}).get()},set:function(e){!function(e,t){var r=o().get(),n=a(e).map(function(e){return __assign({},e,{name:t})});r.loggerData[e.toString()]=n.get(),localStorage.setItem("rxdbg",JSON.stringify(r))}(this.msgOrFnMsg,e)},enumerable:!0,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&this.logFn.apply(this,e)},e.prototype.toString=function(){return this.name},e}(),i=[],window.rxdbg={disable:l,enable:c,list:u,name:p,reset:function(){return localStorage.removeItem("rxdbg")},disableAll:function(){return i.forEach(function(e){return e.enabled=!1})},enableAll:function(){return i.forEach(function(e){return e.enabled=!0})}}}}}),System.register("pleier/util/rx/debug/debug.util",["rxjs/Observable","pleier/util/rx/debug/console.util"],function(e,t){"use strict";var r,n,i;t&&t.id;function o(e,t){void 0===t&&(t=i);var r=n.createDebugger(e);return this.do(function(n){"string"==typeof e?r(e,t(n)):r(e(t(n)))})}function a(e,t){var r=n.createDebugger(e);return this.do(function(){},function(t){"string"==typeof e?r(e,t):r(e(t))})}function u(e,t){var r=n.createDebugger(e);return this.do(function(){},function(){},function(){r(e)})}return e("debugOperator",o),e("debugErrorOperator",a),e("debugCompletedOperator",u),{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(e){return e},r.Observable.prototype.debug=o,r.Observable.prototype.debugError=a,r.Observable.prototype.debugCompleted=u}}}),System.register("pleier/util/rx/debug/info.util",["rxjs/Observable","pleier/util/rx/debug/console.util"],function(e,t){"use strict";var r,n;t&&t.id;function i(e,t){var r=n.createInfo(e);return this.do(function(t){var n;n="string"==typeof e?e:e(t),r(n)})}return e("infoOperator",i),{setters:[function(e){r=e},function(e){n=e}],execute:function(){r.Observable.prototype.info=i}}}),System.register("pleier/util/rx/debug/index",["pleier/util/rx/debug/info.util","pleier/util/rx/debug/debug.util"],function(e,t){"use strict";t&&t.id;return{setters:[function(e){},function(e){}],execute:function(){}}}),System.register("pleier-tpls.system.js",["angular"],function(e){"use strict";var t;return{setters:[function(e){t=e.default}],execute:function(){e("default",t.module("pleierTpls",[]).run(["$templateCache",function(e){e.put("/template/overlay/player-panel.component.html",'<div ng-transclude=""></div>\n'),e.put("/template/overlay/player-volume-horizontal.component.html",'<div ng-click="ctrl.toggleMute()" class="ng-transclude"></div>\n    <div class="hr-yt-volume-hr-bar"\n         yt-slider-move="ctrl.updateVolume($percentage)"\n         yt-slider="ctrl.updateVolume($percentage)">\n    <div class="hr-yt-setted"></div>\n    <div class="hr-yt-handle"></div>\n</div>\n'),e.put("/template/players/pleier.component.html",'<div class="hr-yt-wrapper" style="height: 100%;">\n    <div class="hr-yt-video-place-holder"></div>\n    <div class="hr-yt-overlay" ng-transclude=""></div>\n</div>\n'),e.put("/template/overlay/progress-bar/player-progress-bar-hover-indicator.component.html",'<div class="hr-hover-indicator">\n    <span ng-bind="time"></span>\n</div>\n'),e.put("/template/overlay/progress-bar/player-progress-bar.component.html",'<div yt-slider="ctrl.sliderUp$.next($percentage)"\n     yt-slider-down="ctrl.sliderDown$.next()"\n     yt-slider-move="ctrl.sliderMove$.next($percentage)"\n     class="hr-yt-bar" style="width:100%;height:100%;">\n        <div class="hr-yt-played"></div>\n        <div class="hr-yt-loaded"></div>\n        <div class="hr-yt-handle"></div>\n</div>\n<progress-bar-marker\n    ng-repeat="m in ctrl.markers"\n    marker="m.marker"\n    bar-css-class="m.barCssClass"\n    player="ctrl.player"\n    class="hr-yt-marker" >\n</progress-bar-marker>\n')}]))}}});